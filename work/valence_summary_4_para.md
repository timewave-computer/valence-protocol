# Summary of Valence Protocol Architecture

Valence Protocol is a unified development environment designed to facilitate the creation of trust-minimized cross-chain DeFi applications, known as Valence Programs. These programs abstract away the complexity of interacting across different blockchain domains, offering an easy-to-understand and quick-to-deploy solution that can be configured without extensive custom code. Valence Programs are built around core components such as Domains, various types of Accounts (Base, Storage, Interchain), Libraries for integrating with other DeFi protocols, Programs and Authorizations to define logic and access control, and Middleware for additional processing layers. The protocol supports execution through two primary methods: directly on-chain using supported environments like CosmWasm and EVM, and off-chain via a specialized ZK Coprocessor system.

The on-chain execution layer of Valence Protocol is implemented across different blockchain environments, currently focusing on CosmWasm and EVM. Key contracts like the Authorization and Processor are central to managing user interactions, enforcing access control to program subroutines, and executing message batches. The Processor handles execution queues, retries, and callbacks, though there are differences in behavior between environments, such as how execution failures are handled. A simplified version, the Lite Processor, is optimized for gas-sensitive environments like EVM by executing messages immediately without queues or extensive retry logic. Libraries provide domain-specific integrations, allowing Valence Programs to interact with various DeFi protocols and bridges on both CosmWasm and EVM chains.

Valence Protocol significantly extends its capabilities and abstracts over the complexity of on-chain execution by incorporating a Zero-Knowledge Coprocessor system. This system allows for computationally intensive tasks to be moved off-chain, running as zero knowledge application within a zkVM. The ZK Coprocessor executes zk applications and generates cryptographic proofs that attest to the correctness of the computation. Proofs are then submitted to Valence smart contracts on-chain for efficient verification and message execution.

The ZK integration serves to abstract complex off-chain computation from the underlying on-chain execution environments. By verifying a succinct proof rather than re-executing the computation, the on-chain components (CosmWasm and EVM contracts) can significantly reduce gas costs and increase transaction throughput. This enables the implementation of more sophisticated cross-chain logic and data processing that would be infeasible or prohibitively expensive to perform entirely on-chain. Concepts like state encoding via Encoders (Unary and Merkleized) are used to prepare blockchain state for consumption by the ZK circuits, further enhancing the system's ability to handle and verify cross-chain dependencies.

In essence, Valence Protocol's architecture provides a flexible framework for building cross-chain DeFi. The on-chain CosmWasm and EVM implementations provide the foundational execution environments and core contract logic for accounts, authorization, and processing. The off-chain ZK Coprocessor system complements this by offloading complex computations, offering scalability, and verifiable off-chain processing. This hybrid approach allows developers to leverage the strengths of both on-chain and off-chain computation, creating more powerful and efficient cross-chain applications while maintaining trust minimization through ZK proofs verified on the respective blockchain domains. 